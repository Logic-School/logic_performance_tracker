<?xml version="1.0" encoding="UTF-8"?>
    <templates id="template" xml:space="preserve">
        <!-- Define your QWeb template for the dashboard_card view -->
        <t t-name="logic_performance_tracker.academic_dashboard_template">
            <link rel="stylesheet" type="text/css" href="/logic_performance_tracker/static/src/css/dashboard_card_view.css"/>
            <link rel="stylesheet" type="text/css" href="/logic_performance_tracker/static/src/css/jquery.orgchart.css"/>

            <link rel="stylesheet" type="text/css" href="/logic_performance_tracker/static/src/css/orgchart_styles.css"/>
            
            <div class="o_dashboard_card">
                <script type="text/javascript" src="/logic_performance_tracker/static/src/js/org_chart_component.js"/> 
                <!-- <script >
                    var a = '<t t-esc="Object.keys(values)"/>';
                    console.log(Object.values(a))
                </script> -->
                <div class="inline-container mt-2">
                    <div style="margin-left: auto; margin-right: 0;">
                        <span class="font-weight-bold">Academic Head </span>
                        <select class="academic_head form-control mr-2" style="display: inline-block; width: auto;background-color:#bfc1c2;">
                            <t t-foreach="values['academic_heads']" t-as="academic_head">
                                <option t-att-value="academic_head['head_id']" t-esc="academic_head['name']"/>
                            </t>
                        </select>
                        <span class="font-weight-bold">From: </span>
                        <input class="from_date date-picker-icon custom-date-input" type="date"/>
                        <span class="font-weight-bold"> To: </span>
                        <input placeholder="From: " class="end_date date-picker-icon custom-date-input" type="date"/>
                        <button class="ml-2 rounded btn-md btn-primary o_filter_performance" type="button">Filter</button>
                        <button class="rounded btn-md btn-warning o_filter_reset" type="button">Reset</button>
                    </div>
                </div>

                <!-- <t t-js="values">
                    var elem = document.createElement("div")
                    elem.id = "org_chart"
                    console.log(document.getElementById("org_chart"))
                    document.body.prepend(elem)
                    var chart = new OrgChart(document.getElementById("org_chart"), {
                        padding: 5,
                        template: "polina",
                        layout: OrgChart.normal,
                        enableSearch: false,
                        enableSearch: false,
                        enableEdit: false,
                        mouseScrool: OrgChart.action.none,
                        nodeMouseClick: OrgChart.action.none,
                        editForm: {
                            readOnly: true,
                        },
                        nodeBinding: {
                            field_0: "name",
                            field_1: "title",
                            img_0: "img"
                        },
                        nodes: [
                            { id: 1, name: "Amber McKenzie", title: "CEO", img: "https://cdn.balkan.app/shared/empty-img-white.svg" },
                            { id: 2, pid: 1, name: "Ava Field", title: "IT Manager", img: "https://cdn.balkan.app/shared/empty-img-white.svg" },
                            { id: 3, pid: 1, name: "Rhys Harper", img: "https://cdn.balkan.app/shared/empty-img-white.svg" }
                        ],
                    });
                </t> -->
                
                <!-- <div t-if="values"> -->
                        <!-- <div class="row m-2"> -->


                            <!-- <div class="col-md-2 col-sm-6 oh-payslip" >
                                <div class="oh-card">
                                    <div class="oh-card-body">
                                        <div class="stat-widget-one">
                                            <div class="stat-icon "><img class="img-fluid" src="/logic_performance_tracker/static/src/icons/upaya.png"/></div>
                                            <div class="stat-content">
                                                <div class="stat-text">Upaya</div>
                                                <div class="stat-digit"><t t-esc="values['upaya_count']"/></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2 col-sm-6 oh-payslip" >
                                <div class="oh-card">
                                    <div class="oh-card-body">
                                        <div class="stat-widget-one">
                                            <div class="stat-icon"><img class="overflow-auto img-fluid" src="/logic_performance_tracker/static/src/icons/yes_plus.png"/></div>
                                            <div class="stat-content">
                                                <div class="stat-text">Yes Plus</div>
                                                <div class="stat-digit"><t t-esc="values['yes_plus_count']"/></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2 col-sm-6 oh-payslip" >
                                <div class="oh-card">
                                    <div class="oh-card-body">
                                        <div class="stat-widget-one">
                                            <div class="stat-icon"><img class="overflow-auto img-fluid" src="/logic_performance_tracker/static/src/icons/sfc.png"/></div>
                                            <div class="stat-content">
                                                <div class="stat-text">SFC</div>
                                                <div class="stat-digit"><t t-esc="values['sfc_count']"/></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>



                            <div class="col-md-2 col-sm-6 oh-payslip" >
                                <div class="oh-card">
                                    <div class="oh-card-body">
                                        <div class="stat-widget-one">
                                            <div class="stat-icon"><img class="overflow-auto img-fluid" src="/logic_performance_tracker/static/src/icons/exam.png"/></div>
                                            <div class="stat-content">
                                                <div class="stat-text">Exams</div>
                                                <div class="stat-digit"><t t-esc="values['exam_count']"/></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2 col-sm-6 oh-payslip" >
                                <div class="oh-card">
                                    <div class="oh-card-body">
                                        <div class="stat-widget-one">
                                            <div class="stat-icon"><img class="overflow-auto img-fluid" src="/logic_performance_tracker/static/src/icons/one_to_one.png"/></div>
                                            <div class="stat-content">
                                                <div class="stat-text">One To One</div>
                                                <div class="stat-digit"><t t-esc="values['one_to_one_count']"/></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2 col-sm-6 oh-payslip" >
                                <div class="oh-card">
                                    <div class="oh-card-body">
                                        <div class="stat-widget-one">
                                            <div class="stat-icon"><img class="overflow-auto img-fluid" src="/logic_performance_tracker/static/src/icons/mock_interview.png"/></div>
                                            <div class="stat-content">
                                                <div class="stat-text">Mock Interview</div>
                                                <div class="stat-digit"><t t-esc="values['mock_interview_count']"/></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row m-2">
                            <div class="col-md-2 col-sm-6 oh-payslip" >
                                <div class="oh-card">
                                    <div class="oh-card-body">
                                        <div class="stat-widget-one">
                                            <div class="stat-icon"><img class="overflow-auto img-fluid" src="/logic_performance_tracker/static/src/icons/cip_excel.png"/></div>
                                            <div class="stat-content">
                                                <div class="stat-text">CIP/Excel</div>
                                                <div class="stat-digit"><t t-esc="values['cip_excel_count']"/></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2 col-sm-6 oh-payslip" >
                                <div class="oh-card">
                                    <div class="oh-card-body">
                                        <div class="stat-widget-one">
                                            <div class="stat-icon"><img class="overflow-auto img-fluid" src="/logic_performance_tracker/static/src/icons/bring_your_buddy.png"/></div>
                                            <div class="stat-content">
                                                <div class="stat-text">BB Program</div>
                                                <div class="stat-digit"><t t-esc="values['bring_buddy_count']"/></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> -->

                        <!-- </div> -->
                <!-- </div> -->
                <div class="card m-5">
                    <h1 class="text-center">Department Hierarchy</h1>
                </div>
                <div class="organisation_charts row ">
                    <t t-set="index_id" t-value="0"/>
                    <t t-foreach="Object.keys(values['acad_org_datas'])" t-as="acad_org_data">
                        <div class="m-3 col chart-container" t-att-id="'chart-container-'+index_id">

                        </div>
                        <t t-set="index_id" t-value="index_id+1"/>
                    </t>
                </div>


                <div class="m-3" t-if="values['qualitatives']">
                    <!-- <h1 class="inline">Qualitative Analysis</h1> -->
                    <div class="h-100 table-responsive card" style="border-radius:10px;"> 
                        <table style="font-size:14px;" class="table table-striped table-hover rounded-table table-borderless">
                            <thead>
                                <tr class="rounded" style="background-color:#78787859;">
                                    <td colspan="4" class="text-center"><h2>Qualitative Analysis</h2></td>
                                </tr>
                            </thead>
                            <thead style="background-color:#e0e0de" class="">
                            <tr>
                                <th scope="col" width="7%">#</th>
                                <th scope="col" width="20%">
                                    <div class="">
                                        <img src="/logic_performance_tracker/static/src/icons/employees.png" alt="" height='25' width='25'/>
                                        Employee
                                    </div>
                                </th>
                                <th scope="col" width="60%">
                                    <div class="">
                                        <img src="/logic_performance_tracker/static/src/icons/performances.png" alt="" height='25' width='25'/>
                                        Performances
                                    </div>
                                </th>
                                <th scope="col" width="13%">
                                    <div class="">
                                        <img src="/logic_performance_tracker/static/src/icons/performances.png" alt="" height='25' width='25'/>
                                        Overall Rating
                                    </div>
                                </th>
                            </tr>
                            </thead>
                            <tbody >
                                <t t-set="index" t-value="1"/>
                                <t t-foreach="Object.keys(values['qualitative_overall_averages'])" t-as="employee">
                                    <tr>
                                        <td t-esc="index"/>
                                        <td t-esc="employee"/>
                                        <td style="color: brown" class="">
                                            <t t-foreach="Object.keys(values['qualitatives'][employee])" t-as="attribute">
                                                <span class="ml-4">
                                                    <span class="text-center" t-esc="values['qualitatives'][employee][attribute]['attribute_type']"/>
                                                    <t t-set="star_count" t-value="Math.round(values['qualitatives'][employee][attribute]['average_rating'])"/>
                                                        <t t-foreach="Array.from(Array(star_count).keys())" t-as="star_ind">
                                                            <span class="text-right fa fa-star checked"></span>
                                                        </t>
                                                        <t t-foreach="Array.from(Array(5-star_count).keys())" t-as="star_ind">
                                                            <span class="text-right fa fa-star"></span>
                                                        </t>
                                                        <span t-esc="values['qualitatives'][employee][attribute]['average_rating']"/>
                                                    </span>
                                            </t>
                                        </td>
                                        <t t-set="current_avg" t-value="values['qualitative_overall_averages'][employee]"/>
                                        <td t-if="current_avg>=4" t-esc="current_avg" class="text-success"/>
                                        <td t-elif="current_avg>=2.5" t-esc="current_avg" class="text-warning"/>
                                        <td t-else="" t-esc="current_avg" class="text-danger"/>
                                    </tr>
                                    <t t-set="index" t-value="index+1"/>
                                </t>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="m-3" t-if="values['coordinator_data']">
                    <!-- <h1 class="inline">Coordinator Performances</h1> -->
                    <div class="h-100 table-responsive card" style="border-radius:10px;">
                        <table style="font-size:14px;" class="table table-striped  table-hover rounded-table table-borderless">
                            <thead>
                                <tr class="rounded" style="background-color:#78787859;">
                                    <td class="text-center" colspan="11"><h2>Coordinator Performances</h2></td>
                                </tr>
                            </thead>
                            <thead style="background-color:#e0e0de" class="">
                            <tr>
                                <th width="6%" scope="col">#</th>
                                <th width="20%" scope="col">Employee</th>
                                <th scope="col">
                                    <div class="">
                                        <img src="/logic_performance_tracker/static/src/icons/upaya.png" alt="" height='25' width='25'/>
                                        Upaya
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="">
                                        <img src="/logic_performance_tracker/static/src/icons/yes_plus.png" alt="" height='25' width='25'/>
                                        Yes Plus
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="">
                                        <img src="/logic_performance_tracker/static/src/icons/sfc.png" alt="" height='25' width='25'/>
                                        SFC
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="">
                                        <img src="/logic_performance_tracker/static/src/icons/exam.png" alt="" height='25' width='25'/>
                                        Exams
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="">
                                        <img src="/logic_performance_tracker/static/src/icons/one_to_one.png" alt="" height='25' width='25'/>
                                        One To One
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="">
                                        <img src="/logic_performance_tracker/static/src/icons/mock_interview.png" alt="" height='25' width='25'/>
                                        Mock Interview
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="">
                                        <img src="/logic_performance_tracker/static/src/icons/cip_excel.png" alt="" height='25' width='25'/>
                                        CIP/Excel
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="">
                                        <img src="/logic_performance_tracker/static/src/icons/bring_your_buddy.png" alt="" height='25' width='25'/>
                                        BB
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="">
                                        <img src="/logic_performance_tracker/static/src/icons/total_completed.png" alt="" height='25' width='25'/>
                                        Total
                                    </div>
                                </th>


                            </tr>
                            </thead>
                            <tbody >
                                <t t-set="index" t-value="1"/>
                                <t t-foreach="Object.keys(values['coordinator_data'])" t-as="employee">
                                    <div t-att-id="employee">
                                        <tr class="o_employee_name">
                                            <td class="d-none o_employee_id" t-att-data-empid="employee"/>
                                            <td t-esc="index+'.'"/>
                                            <td t-esc="values['coordinator_data'][employee]['name']"/>
                                            <td style="color: green" t-esc="values['coordinator_data'][employee]['upaya_count']"/>
                                            <td style="color: green" t-esc="values['coordinator_data'][employee]['yes_plus_count']"/>
                                            <td style="color: green" t-esc="values['coordinator_data'][employee]['sfc_count']"/>
                                            <td style="color: green" t-esc="values['coordinator_data'][employee]['exam_count']"/>
                                            <td style="color: green" t-esc="values['coordinator_data'][employee]['one2one_count']"/>
                                            <td style="color: green" t-esc="values['coordinator_data'][employee]['mock_interview_count']"/>
                                            <td style="color: green" t-esc="values['coordinator_data'][employee]['cip_excel_count']"/>
                                            <td style="color: green" t-esc="values['coordinator_data'][employee]['bring_buddy_count']"/>
                                            <td style="color: green" t-esc="values['coordinator_data'][employee]['total_completed']"/>

                                        </tr>
                                    </div>
                                    <t t-set="index" t-value="index+1"/>

                                </t>
                            </tbody>
                        </table>
                    </div>
                </div>
                                
            </div>
        </t>

        <t t-name="logic_performance_tracker.academic_coordinator_data">    
            <!-- <div class="o_coordinator_subtable"> -->
                    <tr t-if="values" class="o_academic_data_subtable">
                        <td colspan="11">
                            <table width="100%" style="font-size:14px; margin: auto; background-color:#e3e0d5;" class="table table-sm mt-1 ml-2">
                                <thead>
                                    <tr>
                                        <th width="5%" scope="col" class="px-3">#</th>
                                        <th width="23.75%" scope="col" class="px-3">Upaya</th>
                                        <th width="23.75%" scope="col" class="px-3">Yes Plus</th>
                                        <th width="23.75%" scope="col" class="px-3">One to One</th>
                                        <th width="23.75%" scope="col" class="px-3">Exam</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="index" t-value="1"/>
                                    <t t-foreach="values" t-as="employee_data">
                                        <tr>
                                            <td class="px-2" t-esc="index+'.'"/>
                                            <td class="px-2" t-esc="employee_data['upaya_name']"/>
                                            <td class="px-2" t-esc="employee_data['yes_plus_name']"/>
                                            <td class="px-2" t-esc="employee_data['one_to_one_name']"/>
                                            <td class="px-2">
                                                <span t-esc="employee_data['exam']['name']"/>
                                                <span t-if="employee_data['exam']['present_count']">
                                                    (
                                                    <span t-esc="employee_data['exam']['present_count']" class="text-secondary"/>
                                                    /
                                                    <span t-esc="employee_data['exam']['total_count']" class="text-success"/>
                                                    )
                                                </span>


                                            </td>

                                        </tr>
                                        <t t-set="index" t-value="index+1"/>

                                    </t>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    <tr t-else="" class="o_academic_data_subtable">
                        <td colspan="5"><b>No data available for this coordinator</b></td>
                    </tr>
            <!-- </div> -->
        </t>
    </templates>