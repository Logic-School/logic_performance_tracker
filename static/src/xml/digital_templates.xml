<?xml version="1.0" encoding="UTF-8"?>
    <templates id="template" xml:space="preserve">
        <!-- Define your QWeb template for the dashboard_card view -->
        <t t-name="logic_performance_tracker.digital_dashboard_template">
            <link rel="stylesheet" type="text/css" href="/logic_performance_tracker/static/src/css/dashboard_card_view.css"/>
            <link rel="stylesheet" type="text/css" href="/logic_performance_tracker/static/src/css/jquery.orgchart.css"/>

            <link rel="stylesheet" type="text/css" href="/logic_performance_tracker/static/src/css/orgchart_styles.css"/>
            
            <!-- <link rel="stylesheet" type="text/css" href="/logic_performance_tracker/static/src/css/bootstrap.css"/> -->

            <!-- <style>
                h1{
                    color:red;
                }
            </style> -->
            <div class="o_dashboard_card">
                <script type="text/javascript" src="/logic_performance_tracker/static/src/js/org_chart_component.js"/> 

            <div t-if="values">
                <div t-if="values">

                    <div class="organisation_charts row">
                        <t t-set="index_id" t-value="0"/>
                        <t t-foreach="Object.keys(values['org_datas'])" t-as="org_data">
                            <div class="m-3 col chart-container" t-att-id="'chart-container-'+index_id">
    
                            </div>
                            <t t-set="index_id" t-value="index_id+1"/>
                        </t>
                    </div>


                    <div class="row m-2">

                        <t t-foreach="Object.keys(values['states'])" t-as="state">
                            <div class="o_record_state col-sm-3 hr_job_application_approve m-2">
                                <div class="oh-card text-color">
                                <div class="oh-card-body pb-0">
                                    <p t-esc="values['states'][state][0]" class="stat-title"/>
                                    <span class="state" t-esc="state" style="display:none;"/>
                                    <h4 class="mb-0">
                                    <p class="stat-count">
                                    <t t-esc="values['states'][state][1]"/>
                                    </p>
                                    </h4>
                                </div>
                                </div>
                            </div>
                        </t>
                    </div>

                    <!-- <div class="card oh-card" style="width: 18rem;">
                        <div class="card-body oh-card-body">
                          <h5 class="card-title text-center">Digital Tasks</h5>
                        </div>
                        <ul class="list-group list-group-flush">
                        <t t-foreach="Object.keys(values['states'])" t-as="state">
                          <li t-esc="state+' : '+values['states'][state]" class="list-group-item" style="font-size:14px;"/>
                        </t>
                        </ul>
                    </div> -->

                    <div class="m-3">
                        <div class="inline-container">
                            <h1 class="inline" >Leaderboard</h1>
                            <div style="margin-left: auto; margin-right: 0;">
                            <span class="font-weight-bold">From: </span>
                            <input class="from_date date-picker-icon custom-date-input" type="date"/>
                            <span class="font-weight-bold"> To: </span>
                            <input placeholder="From: " class="end_date date-picker-icon custom-date-input" type="date"/>
                            <button class="ml-2 rounded btn-md btn-primary o_filter_performance" type="button">Filter</button>
                            </div>
                        </div>
                        

                        <div class="h-100 table-responsive" t-if="values['performances']">
                            <table style="font-size:14px;" class="table table-striped table-hover rounded-table">
                                <thead class="thead-dark">
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Employee</th>
                                    <th class="text-center" scope="col">Completed Tasks</th>

                                    <th scope="col">Tasks Rating</th>
                                    <th scope="col">Qualitative Rating</th>
                                    <th scope="col">Overall Rating</th>


                                </tr>
                                </thead>
                                <tbody style="font-size:14px;">
                                    <t t-set="index" t-value="1"/>
                                    <t t-foreach="values['performances']" t-as="exec_performance">

                                        <tr>
                                            <td t-esc="index"/>
                                            <td t-esc="exec_performance['name']"/>
                                            <td style="color: green" t-esc="exec_performance['completed_tasks']" class="text-center"/>
                                            <!-- <td t-esc="exec_performance['average_rating']"/> -->
                                            <t t-set="star_count" t-value="Math.round(exec_performance['average_rating'])"/>
                                            <td>
                                                <t t-foreach="Array.from(Array(star_count).keys())" t-as="star_ind">
                                                    <span class="fa fa-star checked"></span>
                                                </t>
                                                <t t-foreach="Array.from(Array(5-star_count).keys())" t-as="star_ind">
                                                    <span class="fa fa-star"></span>
                                                </t>
                                                <span class="ml-2" t-esc="exec_performance['average_rating']"/>
                                            </td>
                                            
                                            <t t-set="star_count" t-value="Math.round(exec_performance['qualitative_average'])"/>
                                            <td>
                                                <t t-foreach="Array.from(Array(star_count).keys())" t-as="star_ind">
                                                    <span class="fa fa-star checked"></span>
                                                </t>
                                                <t t-foreach="Array.from(Array(5-star_count).keys())" t-as="star_ind">
                                                    <span class="fa fa-star"></span>
                                                </t>
                                                <span class="ml-2" t-esc="exec_performance['qualitative_average']"/>
                                            </td>

                                            <t t-set="star_count" t-value="Math.round(exec_performance['overall_rating'])"/>
                                            <td>
                                                <t t-foreach="Array.from(Array(star_count).keys())" t-as="star_ind">
                                                    <span class="fa fa-star checked"></span>
                                                </t>
                                                <t t-foreach="Array.from(Array(5-star_count).keys())" t-as="star_ind">
                                                    <span class="fa fa-star"></span>
                                                </t>
                                                <span class="ml-2" t-esc="exec_performance['overall_rating']"/>
                                            </td>
                                        </tr>
                                        <t t-set="index" t-value="index+1"/>
                                        </t>
                                </tbody>
                            </table>
                        </div>
                    </div>


                    <div class="m-3" t-if="values['qualitatives']">
                        <!-- <h1 class="inline">Qualitative Analysis</h1> -->
                        <div class="h-100 table-responsive card" style="border-radius:10px;"> 
                            <table style="font-size:14px;" class="table table-striped table-hover rounded-table table-borderless">
                                <thead>
                                    <tr class="rounded" style="background-color:#d6ef8859;">
                                        <td colspan="4" class="text-center"><h1>Qualitative Analysis</h1></td>
                                    </tr>
                                </thead>
                                <thead style="background-color:#e0e0de" class="">
                                <tr>
                                    <th scope="col" width="7%">#</th>
                                    <th scope="col" width="20%">
                                        <div class="">
                                            <img src="/logic_performance_tracker/static/src/icons/employees.png" alt="" height='25' width='25'/>
                                            Employee
                                        </div>
                                    </th>
                                    <th scope="col" width="60%">
                                        <div class="">
                                            <img src="/logic_performance_tracker/static/src/icons/performances.png" alt="" height='25' width='25'/>
                                            Performances
                                        </div>
                                    </th>
                                    <th scope="col" width="13%">
                                        <div class="">
                                            <img src="/logic_performance_tracker/static/src/icons/performances.png" alt="" height='25' width='25'/>
                                            Overall Rating
                                        </div>
                                    </th>
                                </tr>
                                </thead>
                                <tbody >
                                    <t t-set="index" t-value="1"/>
                                    <t t-foreach="Object.keys(values['qualitative_overall_averages'])" t-as="employee">
                                        <tr>
                                            <td t-esc="index"/>
                                            <td t-esc="employee"/>
                                            <td style="color: brown" class="">
                                                <t t-foreach="Object.keys(values['qualitatives'][employee])" t-as="attribute">
                                                    <span class="ml-4">
                                                        <span class="text-center" t-esc="values['qualitatives'][employee][attribute]['attribute_type']"/>
                                                        <t t-set="star_count" t-value="Math.round(values['qualitatives'][employee][attribute]['average_rating'])"/>
                                                            <t t-foreach="Array.from(Array(star_count).keys())" t-as="star_ind">
                                                                <span class="text-right fa fa-star checked"></span>
                                                            </t>
                                                            <t t-foreach="Array.from(Array(5-star_count).keys())" t-as="star_ind">
                                                                <span class="text-right fa fa-star"></span>
                                                            </t>
                                                            <span t-esc="values['qualitatives'][employee][attribute]['average_rating']"/>
                                                        </span>
                                                </t>
                                            </td>
                                            <t t-set="current_avg" t-value="values['qualitative_overall_averages'][employee]"/>
                                            <td t-if="current_avg>=4" t-esc="current_avg" class="text-success"/>
                                            <td t-elif="current_avg>=2.5" t-esc="current_avg" class="text-warning"/>
                                            <td t-else="" t-esc="current_avg" class="text-danger"/>
                                        </tr>
                                        <t t-set="index" t-value="index+1"/>
                                    </t>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="m-3">
                        <h1 class="inline">Miscellaneous Works</h1>

                        <div class="h-100 table-responsive" t-if="values['other_performances']">
                            <table style="font-size:14px;" class="table table-striped table-hover rounded-table">
                                <thead class="thead-dark">
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Employee</th>
                                    <th class="text-center" scope="col">Completed Tasks</th>

                                    <th scope="col">Average Rating</th>


                                </tr>
                                </thead>
                                <tbody style="font-size:14px;">
                                    <t t-set="index" t-value="1"/>
                                    <t t-foreach="Object.keys(values['other_performances'])" t-as="employee">

                                        <tr>
                                            <td t-esc="index"/>
                                            <td t-esc="values['other_performances'][employee]['name']"/>
                                            <td style="color: green" t-esc="values['other_performances'][employee]['completed_tasks']" class="text-center"/>
                                            <!-- <td t-esc="exec_performance['average_rating']"/> -->
                                            <t t-set="star_count" t-value="Math.round(values['other_performances'][employee]['average_rating'])"/>
                                            <td>
                                                <t t-foreach="Array.from(Array(star_count).keys())" t-as="star_ind">
                                                    <span class="fa fa-star checked"></span>
                                                </t>
                                                <t t-foreach="Array.from(Array(5-star_count).keys())" t-as="star_ind">
                                                    <span class="fa fa-star"></span>
                                                </t>
                                                <span class="ml-2" t-esc="values['other_performances'][employee]['average_rating']"/>
                                            </td>

                                        </tr>
                                        <t t-set="index" t-value="index+1"/>
                                        </t>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </div>
            </div>
        </t>
    </templates>