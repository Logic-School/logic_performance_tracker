<?xml version="1.0" encoding="UTF-8"?>

<templates xml:space="preserve">
    <!-- Define your QWeb template for the dashboard_card view -->
    <t t-name="logic_performance_tracker.employee_performance_report_template">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"/>

        <style>
            .page-header {

                padding: 10px;
                text-align: center;
            }

            .employee-report-details-card {
                border-radius: 10px;
                background-color: #ffffff;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                padding: 10px;
                margin-bottom: 20px;
            }
            
            .employee-image {
                height: 100px;
                width: auto;
                border-radius: 20px;
            }
            
            .performance-table {
                border-radius: 10px;
            }
            
            .label1{
                font-weight: bold;
            }
        </style>
        <div t-if="values" class="container-fluid" style="margin:0;padding:0;">
            
            <div class="container mt-3 card-body">
                <div class="page-header">
                    <h4>Employee Performance - <span t-esc="values['start_date']"/> - <span t-esc="values['end_date']"/></h4>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <div class="">
                        <div class="row">
                            <div class="col-5">
                                <span class="label1">Name:</span>
                            </div>
                            <div class="col-7">
                                <span t-esc="values['personal_data']['name']"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-5">
                                <span class="label1">Department:</span>
                            </div>
                            <div class="col-7">
                                <span t-esc="values['personal_data']['department_name']"/>
                            </div>
                        </div>

                        <div class="row" t-if="values['personal_data']['head_name']">
                            <div class="col-5">
                                <span class="label1">Head:</span>
                            </div>
                            <div class="col-7">
                                <span t-esc="values['personal_data']['head_name']"/>
                            </div>
                        </div>
    
                        <div class="row">
                            <div class="col-5">
                                <span class="label1">Job Position:</span>
                            </div>
                            <div class="col-7">
                                <span t-esc="values['personal_data']['job_title']"/>
                            </div>
                        </div>

                        <div class="row" t-if="values['personal_data']['branch']">
                            <div class="col-5">
                                <span class="label1">Branch:</span>
                            </div>
                            <div class="col-7">
                                <span t-esc="values['personal_data']['branch']"/>
                            </div>
                        </div>


                        <div class="row">
                            <div class="col-5">
                                <span class="label1">Date of Joining:</span>
                            </div>
                            <div class="col-7">
                                <span t-esc="values['personal_data']['date_of_joining']"/>
                            </div>
                        </div>
                        <!-- Repeat the same structure for other details -->
    
                    </div>
                </div>
                <div class="col-4">
                    <div class="">
                        <div class="row justify-content-center">
                            <div class="text-left">
                                <!-- Replace with actual image URL -->
                                <img t-att-src="values['personal_data']['image']" alt="Employee Image" class="employee-image"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-6">
                    <div class="">
                        <div class="row">
                            <div class="col-5">
                                <span class="label1">Qualitative Rating:</span>
                            </div>
                            <div class="col-7">
                                <span t-esc="values['common_performance']['qualitative_average_rating']"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-5">
                                <span class="label1">Miscellaneous Tasks:</span>
                            </div>
                            <div class="col-7">
                                <span t-esc="values['common_performance']['completed_misc_count']"/>
                                <span t-esc="' ( '+values['common_performance']['delayed_misc_count'] + ' Delayed )'"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-5">
                                <span class="label1">To Do Tasks:</span>
                            </div>
                            <div class="col-7">
                                <span t-esc="values['common_performance']['completed_to_do_count']"/>
                                <span t-esc="' ( '+values['common_performance']['delayed_to_do_count'] + ' Delayed )'"/>

                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div t-if="values['academic_data']">
                <div t-if="values['academic_data']['academic_head_data']">

                    <div class="row mt-3">
                        <t t-set="badge_colors" t-value="['badge-primary','badge-secondary', 'badge-info', 'badge-success']"/>
                        <div class="col-6">
                            <div class="">
                                <div class="row">
                                    <div class="col-5">
                                        <span class="label1">Courses :</span>
                                    </div>
                                    <div class="col-7">
                                        <t t-foreach="values['academic_data']['academic_head_data']['course_names']" t-as="course_name">
                                            <span style="font-size:14px;" t-att-class="'badge ' + badge_colors[Math.floor((Math.random()*badge_colors.length))] " t-esc="course_name"/>
                                        </t>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-5">
                        <div class="table-responsive table-sm card performance-table">
                            <!-- Add 'table-bordered' class for borders -->
                            <table class="table table-striped table-hover table-bordered">
                                <thead>
                                    <tr class="rounded" style="background-color:#78787859;">
                                        <td colspan="8" class="text-center font-weight-bold"><h5>Subordinates and Batches</h5></td>
                                    </tr>
                                </thead>
                                <thead class="bg-light">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col" class="text-center">Subordinates</th>
                                        <th width="50%" scope="col" class="text-center">Batches</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="index" t-value="1"/>
                                    <t t-foreach="Object.keys(values['academic_data']['academic_head_data']['subordinates_data'])" t-as="subordinate">
                                        <t t-set="batch_data_length" t-value="values['academic_data']['academic_head_data']['subordinates_data'][subordinate]['batches_data'].length"/>
                                        <tr>
                                            <td class="align-middle text-center"  t-esc="index"/>
                                            <td class="align-middle text-center"  t-esc="subordinate"/>
                                            <td class="align-middle text-center"> 
                                                <t t-if="batch_data_length>0" t-foreach="values['academic_data']['academic_head_data']['subordinates_data'][subordinate]['batches_data']" t-as="batch_data">
                                                    <span t-esc="batch_data['batch_name']" class="text-center m-1" style="display:block"/>
                                                    <span t-esc="' ( Students: '"/>
                                                    <span class="text-info" t-esc="batch_data['students_count']"/>
                                                    <span t-esc="', Rating:'"/>
                                                    <span class="text-info" t-esc="batch_data['students_rating']"/>
                                                    <span t-esc="' )'"/>
                                                </t>
                                                <t t-if="batch_data_length==0">
                                                    <span t-esc="''"/>
                                                </t>
                                            </td>
                                        </tr>
                                        <t t-set="index" t-value="index+1"/>
                                    </t>

                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
    
            <div t-if="values['sales_data']">
                <div class="mt-5">
                    <div class="table-responsive table-sm card performance-table">
                        <!-- Add 'table-bordered' class for borders -->
                        <table class="table table-striped table-hover table-bordered">
                            <thead>
                                <tr class="rounded" style="background-color:#78787859;">
                                    <td colspan="8" class="text-center font-weight-bold"><h5>Sales Performance</h5></td>
                                </tr>
                            </thead>
                            <thead class="bg-light">
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Lead Source</th>
                                    <th scope="col" class="text-center">Leads</th>
                                    <th scope="col" class="text-center">Hot</th>
                                    <th scope="col" class="text-center">Warm</th>
                                    <th scope="col" class="text-center">Cold</th>
                                    <th scope="col" class="text-center">Converted Leads</th>
                                    <th scope="col" class="text-center">Conversion Rate (%)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="index" t-value="1"/>
                                <t t-foreach="Object.keys(values['sales_data']['source_leads_data'])" t-as="lead_source">
                                <!-- Add rows dynamically based on data -->
                                    <tr>
                                        <td t-esc="index" class="text-center"/>
                                        <td t-esc="lead_source" class="text-center"/>
                                        <td t-esc="values['sales_data']['source_leads_data'][lead_source]['leads_count']" class="text-center"/>
                                        <td t-esc="values['sales_data']['source_leads_data'][lead_source]['hot_leads_count']" class="text-center"/>
                                        <td t-esc="values['sales_data']['source_leads_data'][lead_source]['warm_leads_count']" class="text-center"/>
                                        <td t-esc="values['sales_data']['source_leads_data'][lead_source]['cold_leads_count']" class="text-center"/>

                                        <td t-esc="values['sales_data']['source_leads_data'][lead_source]['converted_lead_count']" class="text-center"/>
                                        <td t-esc="values['sales_data']['source_leads_data'][lead_source]['leads_conversion_rate']" class="text-center"/>
                                    </tr>
                                    <t t-set="index" t-value="index+1"/>
                                </t>
                                <tr rowspan="2">
                                    <td t-esc="''"/>
                                    <td t-esc="'Total'" class="text-center font-weight-bold"/>
                                    <td t-esc="values['sales_data']['overall_source_leads_data']['total_leads_count']" class="text-center font-weight-bold"/>
                                    <td t-esc="values['sales_data']['overall_source_leads_data']['total_hot_leads']" class="text-center font-weight-bold"/>
                                    <td t-esc="values['sales_data']['overall_source_leads_data']['total_warm_leads']" class="text-center font-weight-bold"/>
                                    <td t-esc="values['sales_data']['overall_source_leads_data']['total_cold_leads']" class="text-center font-weight-bold"/>

                                    <td t-esc="values['sales_data']['overall_source_leads_data']['total_converted_leads']" class="text-center font-weight-bold"/>
                                    <td t-esc="values['sales_data']['overall_source_leads_data']['total_conversion_rate']" class="text-center font-weight-bold"/>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div t-if="values['sales_data']" style="page-break-inside: avoid;">
                <div class="mt-5">
                    <div class="table-responsive table-sm card performance-table">
                        <!-- Add 'table-bordered' class for borders -->
                        <table class="table table-striped table-hover table-bordered">
                            <thead>
                                <tr class="rounded" style="background-color:#78787859;">
                                    <td colspan="8" class="text-center font-weight-bold"><h5>Sales Performance</h5></td>
                                </tr>
                            </thead>
                            <thead class="bg-light">
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Course</th>
                                    <th scope="col" class="text-center">Leads</th>
                                    <th scope="col" class="text-center">Converted Leads</th>
                                    <th scope="col" class="text-center">Conversion Rate (%)</th>
                                    <th scope="col" class="text-center">Revenue</th>

                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="index" t-value="1"/>
                                <t t-foreach="Object.keys(values['sales_data']['course_leads_data'])" t-as="lead_source">
                                <!-- Add rows dynamically based on data -->
                                    <tr>
                                        <td t-esc="index" class="text-center"/>
                                        <td t-esc="lead_source" class="text-center"/>
                                        <td t-esc="values['sales_data']['course_leads_data'][lead_source]['leads_count']" class="text-center"/>
                                        <td t-esc="values['sales_data']['course_leads_data'][lead_source]['converted_lead_count']" class="text-center"/>
                                        <td t-esc="values['sales_data']['course_leads_data'][lead_source]['leads_conversion_rate']" class="text-center"/>
                                        <td class="text-center font-weight-bold">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <span class="mt-2" t-esc="values['sales_data']['course_leads_data'][lead_source]['course_revenue'].toLocaleString('en-IN', {'style':'currency', 'currency':'INR'})"></span>
                                            </div>
                                        </td>
                                    </tr>
                                    <t t-set="index" t-value="index+1"/>
                                </t>
                                <tr rowspan="2">
                                    <td t-esc="''"/>
                                    <td t-esc="'Total'" class="text-center font-weight-bold"/>
                                    <td t-esc="values['sales_data']['overall_course_leads_data']['total_leads_count']" class="text-center font-weight-bold"/>
                                    <td t-esc="values['sales_data']['overall_course_leads_data']['total_converted_leads']" class="text-center font-weight-bold"/>
                                    <td t-esc="values['sales_data']['overall_course_leads_data']['total_conversion_rate']" class="text-center font-weight-bold"/>
                                    <td class="text-center font-weight-bold">
                                        <div class="d-flex align-items-center justify-content-center">
                                            <span class="mt-2" t-esc="values['sales_data']['overall_course_leads_data']['total_course_revenue'].toLocaleString('en-IN', {'style':'currency', 'currency':'INR'})"></span>
                                        </div>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div t-if="values['marketing_data']">
                <div class="mt-5">
                    <div class="table-responsive table-sm card performance-table">
                        <!-- Add 'table-bordered' class for borders -->
                        <table class="table table-striped table-hover table-bordered">
                            <thead>
                                <tr class="rounded" style="background-color:#78787859;">
                                    <td colspan="7" class="text-center"><h5>Marketing Performance</h5></td>
                                </tr>
                            </thead>
                            <thead class="bg-light">
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">District</th>
                                    <th scope="col" class="text-center">Seminars</th>
                                    <th scope="col" class="text-center">Webinars</th>
                                    <th scope="col" class="text-center">Leads</th>
                                    <th scope="col" class="text-center">Converted Leads</th>
                                    <th scope="col" class="text-center">Conversion Rate (%)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="index" t-value="1"/>
                                <t t-foreach="Object.keys(values['marketing_data']['seminar_data'])" t-as="district">
                                <!-- Add rows dynamically based on data -->
                                    <tr>
                                        <td t-esc="index" class="text-center"/>
                                        <td t-esc="district" class="text-center"/>
                                        <td t-esc="values['marketing_data']['seminar_data'][district]['seminar_count']" class="text-center"/>
                                        <td t-esc="values['marketing_data']['seminar_data'][district]['webinar_count']" class="text-center"/>
                                        <td t-esc="values['marketing_data']['seminar_data'][district]['leads_count']" class="text-center"/>
                                        <td t-esc="values['marketing_data']['seminar_data'][district]['converted_leads_count']" class="text-center"/>
                                        <td t-esc="values['marketing_data']['seminar_data'][district]['leads_conversion_rate']" class="text-center"/>
                                    </tr>
                                    <t t-set="index" t-value="index+1"/>
                                </t>
                                <tr>
                                    <td t-esc="''"/>
                                    <td t-esc="'Total'" class="text-center font-weight-bold"/>
                                    <td t-esc="values['marketing_data']['overall_leads_data']['total_seminar_count']" class="text-center font-weight-bold"/>
                                    <td t-esc="values['marketing_data']['overall_leads_data']['total_webinar_count']" class="text-center font-weight-bold"/>
                                    <td t-esc="values['marketing_data']['overall_leads_data']['total_leads_count']" class="text-center font-weight-bold"/>
                                    <td t-esc="values['marketing_data']['overall_leads_data']['total_converted_leads']" class="text-center font-weight-bold"/>
                                    <td t-esc="values['marketing_data']['overall_leads_data']['total_conversion_rate']" class="text-center font-weight-bold"/>

                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </t>
</templates>
